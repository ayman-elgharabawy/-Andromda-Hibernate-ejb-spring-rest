// license-header java merge-point
/* Autogenerated on 03/19/2016 08:16:06+0200 by AndroMDA DO NOT EDIT!
 *
 * TEMPLATE:    cxf/WSClient.vsl in andromda-webservices-cartridge
 * MODEL CLASS: Data::com.vis.oubl::service::MedicalHistoryService
 * STEREOTYPE:  WebService
*/
package com.vis.oubl.service.test;

import com.vis.oubl.service.MedicalHistoryServiceSEI;
import com.vis.oubl.service.MedicalHistoryServiceSEIClient;
import java.net.URL;
import javax.xml.namespace.QName;
import java.io.IOException;
import java.io.InputStream;
import javax.servlet.http.HttpServletResponse;
import javax.ws.rs.core.Response;
import org.apache.cxf.helpers.IOUtils;
import org.apache.cxf.jaxrs.client.WebClient;
import junit.framework.TestCase;
import junit.textui.TestRunner;

/**
 * Client test for the MedicalHistoryService web service. Modified from CXF generated test client.
 * 
 */
public final class MedicalHistoryService_WSClient extends TestCase
{
    private static final QName SERVICE_NAME = new QName("http://service.oubl.vis.com/", "MedicalHistoryService");
    private static URL wsdlURL = null;

    /**
     * Public constructor for JUnit
     */
    public MedicalHistoryService_WSClient()
    {
        // Documented empty constructor - avoid compiler warning
    }

    /**
     * @param name
     */
    public MedicalHistoryService_WSClient(String name)
    {
        super(name);
    }

    /**
     * @see junit.framework.TestCase#setUp()
     */
    @Override
    protected void setUp() throws Exception
    {
        super.setUp();
        //if (args.length == 0)
        //{
            wsdlURL = MedicalHistoryServiceSEIClient.WSDL_LOCATION;
        //}
        /*else
        {
            File wsdlFile = new File(args[0]);
            try
            {
                if (wsdlFile.exists())
                {
                    wsdlURL = wsdlFile.toURI().toURL();
                } else
                {
                    wsdlURL = new URL(args[0]);
                }
            }
            catch (MalformedURLException e)
            {
                e.printStackTrace();
            }
        } */
    }

    /**
     * @see junit.framework.TestCase#tearDown()
     */
    @Override
    protected void tearDown() throws Exception
    {
        super.tearDown();
    }

    /**
     * @param args
     * @throws Exception
     */
    public static void main(String args[]) throws Exception
    {
        TestRunner.run(MedicalHistoryService_WSClient.class);

        /*

       //  String _getCustomer__return =           testGetCustomer(port);

       //  String _getRedPlaneService__return =           testGetRedPlaneService(port);
       */
    }
    /**
     * Test MedicalHistoryService Service getCustomer
     */
    public void testGetCustomer()
    {
        com.vis.oubl.service.GetCustomer getCustomerInput = com.vis.oubl.service.GetCustomerImpl.getCustomerCreateInput();
        System.out.println("Invoking getCustomer on MedicalHistoryService with"
            + " id=" + getCustomerInput.getId()
        );
        Response response = null;
        InputStream is = null;
        int length = 0;
        String _getCustomer__return = "Failed to read output from result";
        String restURL = "http://localhost:9090/pag-webservice/services/medicalhistoryservice/login/1/";
        System.out.println("Creating REST Webclient for URL " + restURL);
        try
        {
            WebClient client = WebClient.create(restURL);
            response = client.path("").type("application/json").accept("application/json").get();
            is = (InputStream)response.getEntity();
            length = is.available();
            _getCustomer__return = IOUtils.readStringFromStream(is);
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        catch (Exception ex)
        {
            try
            {
                if (is != null)
                {
                    is.close();
                }
            }
            catch (IOException ignore)
            {
                // Ignore close exception - already closed
            }
        }
        if (response != null)
        {
            if (response.getStatus()==HttpServletResponse.SC_OK && length>0)
            {
                System.out.println("SUCCESS getCustomer.result=" + response.getStatus() + " getCustomer.size=" + length);
            }
            else
            {
                System.out.println("FAILURE getCustomer.result=" + response.getStatus() + " getCustomer.size=" + length);
            }
        }
        else
        {
            System.out.println("FAILURE Received null response");
        }
        assertNotNull(response);
        assertTrue(length>0);
        System.out.println("getCustomer.result=" + _getCustomer__return);
        // return _getCustomer__return;
    }

    /**
     * Test MedicalHistoryService Service getRedPlaneService
     */
    public void testGetRedPlaneService()
    {
        System.out.println("Invoking getRedPlaneService on MedicalHistoryService with"
        );
        Response response = null;
        InputStream is = null;
        int length = 0;
        String _getRedPlaneService__return = "Failed to read output from result";
        String restURL = "http://localhost:9090/pag-webservice/services/medicalhistoryservice/search/";
        System.out.println("Creating REST Webclient for URL " + restURL);
        try
        {
            WebClient client = WebClient.create(restURL);
            response = client.path("").get();
            is = (InputStream)response.getEntity();
            length = is.available();
            _getRedPlaneService__return = IOUtils.readStringFromStream(is);
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        catch (Exception ex)
        {
            try
            {
                if (is != null)
                {
                    is.close();
                }
            }
            catch (IOException ignore)
            {
                // Ignore close exception - already closed
            }
        }
        if (response != null)
        {
            if (response.getStatus()==HttpServletResponse.SC_OK && length>0)
            {
                System.out.println("SUCCESS getRedPlaneService.result=" + response.getStatus() + " getRedPlaneService.size=" + length);
            }
            else
            {
                System.out.println("FAILURE getRedPlaneService.result=" + response.getStatus() + " getRedPlaneService.size=" + length);
            }
        }
        else
        {
            System.out.println("FAILURE Received null response");
        }
        assertNotNull(response);
        assertTrue(length>0);
        System.out.println("getRedPlaneService.result=" + _getRedPlaneService__return);
        // return _getRedPlaneService__return;
    }

    /**
     * JUnit test data class, used by DataDrivenTestSuite in suite()
     */
    public static class MedicalHistoryServiceTestData
    {
        // TODO: Add test data fields here (populated by MedicalHistoryService.xls spreadsheet
        // TODO: Recursively list every primitive parameter in entire operation parameter hierarchy
        @SuppressWarnings("unused")
        private java.lang.Long getCustomerId;
        /**
         * Data value for id getCustomer on used by DataDrivenTestSuite in suite().
         * getCustomerid must be the column name of the parameter in the spreadsheet
         * @param value Long to be populated manually
         */
        public void setGetCustomerId(java.lang.Long value)
        {
            this.getCustomerId = value;
        }
    }
}
